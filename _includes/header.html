<!-- Top accent bar (separate from sticky header) -->
<div class="top-bar bg-inkwell text-paper border-b-2 border-hot-magenta relative transition-all duration-500"
     x-data="{ scrolled: false }"
     x-init="window.addEventListener('scroll', () => { scrolled = window.pageYOffset > 50 })"
     :class="scrolled ? 'opacity-0 -translate-y-full pointer-events-none' : 'opacity-100 translate-y-0'">
  <!-- Stipple pattern overlay -->
  <div class="absolute inset-0 opacity-10 bg-stripes-cyan"></div>
  <div class="container-tight flex justify-between items-center relative z-10 py-2">
    <p class="text-base font-mono uppercase tracking-wider" x-data="{ words: ['flips', 'quips', 'rips', 'trips', 'ships'], current: 0, stopped: false }" x-init="const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches; if (reduce) { stopped = true; return; } let interval = setInterval(() => { if (current === 4) { stopped = true; clearInterval(interval); } else { current = (current + 1) % words.length } }, 2000)">
      AI THAT <span aria-live="polite" class="font-bold" :class="current === 4 ? 'text-spray-cyan' : 'text-hot-magenta'" x-text="words[current].toUpperCase()"></span>
    </p>
    <p class="font-mono text-technical-base text-paper/60">
      Currently: <span class="text-hot-magenta font-bold">ACCEPTING PROJECTS</span>
    </p>
  </div>
</div>

<header
  class="site-header bg-paper z-50 transition-all duration-300 sticky top-0"
  x-data="header"
  role="banner">

  <!-- Main header with texture -->
  <div class="bg-paper relative border-b-4 border-inkwell shadow-header">
    <!-- Texture overlay -->
    <div class="absolute inset-0 opacity-5 bg-stripes-ink-wide"></div>
    <!-- Asymmetric decorations - various colors and positions -->
    <div class="corner-accent-tl corner-sm border-spray-cyan opacity-30"></div>
    <div class="corner-accent-br w-16 h-16 border-radio-mustard opacity-30"></div>
    <div class="corner-accent-tl top-8 left-32 w-12 h-12 border-hot-magenta opacity-25"></div>
    <div class="corner-accent-bl bottom-4 left-20 w-24 h-8 border-radio-mustard opacity-20"></div>
    <div class="corner-accent-tr top-12 right-48 w-8 h-20 border-spray-cyan opacity-25"></div>
    <div class="absolute bottom-0 left-1/3 w-16 h-10 border-b-2 border-oxide-teal opacity-30"></div>
    <div class="corner-accent-tr top-4 right-1/4 w-10 h-10 border-hot-magenta opacity-20"></div>
    <div class="absolute bottom-8 right-32 w-20 h-6 border-b-2 border-radio-mustard opacity-25"></div>

    <div class="relative">
      <!-- Logo - positioned at left edge -->
      <div class="absolute left-4 md:left-8 top-1/2 -translate-y-1/2 z-20">
        <a href="{{ "/" | relative_url }}" class="flex items-center gap-4 text-inkwell no-underline hover:opacity-90 transition-all duration-300 group">
          <!-- Logo Image -->
          <img src="{{ "/assets/images/logo-transparent-128.png" | relative_url }}" alt="Low Level Magic Logo" class="w-20 h-20 md:w-24 md:h-24">

          <!-- Text - semantic tokens -->
          <div class="flex flex-col">
            <span class="font-mono font-black text-display-medium tracking-tighter uppercase">LOW LEVEL</span>
            <span class="font-display font-black text-section-md tracking-widest text-hot-magenta uppercase -mt-1">MAGIC</span>
          </div>
        </a>
      </div>

      <div class="container-tight">
        <div class="flex justify-end items-center py-6 min-h-[96px]">

        <!-- Navigation -->
        <nav class="site-nav" aria-label="Main">
        <!-- Mobile Menu Toggle -->
        <button
          @click="toggleMobileMenu(); $nextTick(() => $el.closest('nav').querySelector('#primary-menu a')?.focus())"
          @keydown.escape="mobileMenuOpen = false"
          class="md:hidden p-3 cursor-pointer"
          aria-label="Toggle menu"
          :aria-expanded="mobileMenuOpen.toString()"
          aria-controls="primary-menu">
          <svg class="w-6 h-6 text-ink" fill="currentColor" viewBox="0 0 18 15">
            <path d="m18,1.484c0,0.82-0.665,1.484-1.484,1.484h-15.032c-0.819,0-1.484-0.662-1.484-1.484s0.665-1.484,1.484-1.484h15.032c0.819,0,1.484,0.662,1.484,1.484zm0,5.16c0,0.82-0.665,1.484-1.484,1.484h-15.032c-0.819,0-1.484-0.662-1.484-1.484s0.665-1.484,1.484-1.484h15.032c0.819,0,1.484,0.662,1.484,1.484zm0,5.16c0,0.82-0.665,1.484-1.484,1.484h-15.032c-0.819,0-1.484-0.662-1.484-1.484s0.665-1.484,1.484-1.484h15.032c0.819,0,1.484,0.662,1.484,1.484z"/>
          </svg>
        </button>

        <!-- Desktop Navigation with semantic typography -->
        <div class="hidden md:flex items-center gap-4">
          {% for item in site.navigation %}
            <a
              class="page-link font-mono font-bold text-body-lg uppercase tracking-wider text-inkwell no-underline px-3 py-3 transition-all duration-150 hover:bg-hot-magenta hover:text-paper relative group {% if page.url == item.url %}active{% endif %}"
              href="{{ item.url | relative_url }}">
              {{ item.title }}
              <span class="absolute bottom-0 left-0 w-full h-[2px] bg-spray-cyan transform scale-x-0 group-hover:scale-x-100 transition-transform duration-200 origin-left"></span>
            </a>
          {% endfor %}
        </div>

        <!-- Mobile Navigation Menu -->
        <div
          id="primary-menu"
          x-show="mobileMenuOpen"
          x-transition:enter="transition ease-out duration-200"
          x-transition:enter-start="opacity-0 transform -translate-y-2"
          x-transition:enter-end="opacity-100 transform translate-y-0"
          x-transition:leave="transition ease-in duration-150"
          x-transition:leave-start="opacity-100 transform translate-y-0"
          x-transition:leave-end="opacity-0 transform -translate-y-2"
          @click.away="mobileMenuOpen = false"
          @keydown.escape.window="mobileMenuOpen = false"
          class="absolute top-full right-0 bg-paper border border-graphite border-t-0 p-4 flex flex-col gap-4 min-w-[200px] md:hidden">
          {% for item in site.navigation %}
            <a
              class="page-link font-body font-medium text-body-sm uppercase tracking-wide text-ink no-underline px-2 py-1 rounded-sm transition-all duration-150 hover:bg-spray-cyan hover:text-paper {% if page.url == item.url %}active{% endif %}"
              href="{{ item.url | relative_url }}">
              {{ item.title }}
            </a>
          {% endfor %}
        </div>
        </nav>
        </div>
      </div>
    </div>
  </div>
</header>